<!DOCTYPE html>
<html>
  <head>
    <title>Blue Badge Parking - Central London</title>
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">
    <style>
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
      #map {
        height: 100%;
      }
      #info-box {
        background-color: white;
        border: 1px solid black;
        bottom: 40px;
        height: 20px;
        padding: 10px;
        position: absolute;
        left: 40px;
     }
      #streetview {
        background-color: white;
        border: 2px solid blue;
        bottom: 10px;
        height: 10px;
        padding: 10px;
        position: absolute;
        left: 10px;
      }
    </style>
  </head>
  <body>
    <div id="map"></div>
    <div id="info-box">?</div>
        <div id="streetview"></div>
    <script>

var map;
function initMap() {
  map = new google.maps.Map(document.getElementById('map'), {
    zoom: 14,
    center: {lat: 51.51, lng: -0.19}
  });

  // Load GeoJSON.
 // map.data.loadGeoJson('geojson-io.json');
// map.data.loadGeoJson('blue-badge-feb-16.json');
  map.data.loadGeoJson('b-b-tester-url.json');
 // map.data.loadGeoJson('{
 "type":"FeatureCollection",
 "features": [  
     {
     "type":"Feature",
     "properties": {    
       "marker-color":"#7e7e7e",
       "marker-size":"medium",
       "marker-symbol":"",   
                   "updated":"October 2015",
                   "location":"Kensington",
                 "street-view":"http://maps.google.com/maps?q=&layer=c&cbll=",
                "postcode":"W10 5YG",
                "street":[51.5218,-0.2044],
                "name":"Acklam Road"      
                },
     "geometry": {
       "type":"Point",
       "coordinates": [	-0.2044	,	51.5218]
      }
  },
  {
     "type":"Feature",
     "properties": {      
                    "updated":"Jan 2016",
                   "location":"City",
               "postcode":"EC2V 7HH",
                "street":[51.5154,-0.0932],
                "name":"Aldermanbury"
      },
     "geometry": {
       "type":"Point",
       "coordinates": [	-0.0932 	,	51.5154]
      }
  },
  {
     "type":"Feature",
     "properties": {      
                    "updated":"Jan 2016",
                   "location":"City",
               "postcode":"EC2V 7HH",
                "street":[51.5155,-0.0932],
                "name":"Aldermanbury - check there are four"
      },
     "geometry": {
       "type":"Point",
       "coordinates": [	-0.0932 	,	51.5155]
      }
  },
  {
     "type":"Feature",
     "properties": {      
                    "updated":"Jan 2016",
                   "location":"City",
               "postcode":"EC2V 7HP",
                "street":[51.5169,-0.0923],
                "name":"Aldermanbury - check there are four"
      },
     "geometry": {
       "type":"Point",
       "coordinates": [	-0.0923 	,	51.5169]
      }
  },
  {
     "type":"Feature",
     "properties": {      
                    "updated":"Jan 2016",
                   "location":"City",
               "postcode":"EC2V 7HP",
                "street":[51.5166,-0.0926],
                "name":"Aldermanbury - check there are four"
      },
     "geometry": {
       "type":"Point",
       "coordinates": [	-0.0926 	,	51.5166]
      }
  },
  {
     "type":"Feature",
     "properties": {      
                   "updated":"October 2015",
                   "location":"Westminster",
               "postcode":"NULL",
                "street":[51.5212,-0.1939],
                "name":"Alfred Road"
      },
     "geometry": {
       "type":"Point",
       "coordinates": [	-0.1939 	,	51.5212]
      }
  },
  {
     "type":"Feature",
     "properties": {      
                   "updated":"October 2015",
                   "location":"Kensington",
               "postcode":"W8 6QY",
                "street":[51.4972,-0.1944],
                "name":"Allen Street"
      },
     "geometry": {
       "type":"Point",
       "coordinates": [	-0.1944 	,	51.4972]
      }
  },
    {
     "type":"Feature",
     "properties": {      
                   "updated":"Mar 2016",
                   "location":"Westminster",
               "postcode":"NW1 new",
                "street":[51.5230,-0.1558],
                "name":"Allitsen Road - regents park  - check it exists"
      },
     "geometry": {
       "type":"Point",
       "coordinates": [	-0.1558 	,	51.5230]
      }
  },
  
  {
     "type":"Feature",
     "properties": {      
                   "updated":"Mar 2016",
                   "location":"Westminster",
               "postcode":"NW1 5LQ",
                "street":[51.5230,-0.1558],
                "name":"Allsop Place"
      },
     "geometry": {
       "type":"Point",
       "coordinates": [	-0.1558 	,	51.5230]
      }
  },
  {
     "type":"Feature",
     "properties": {      
                   "updated":"October 2015",
                   "location":"Westminster",
               "postcode":"NULL",
                "street":[51.4963,-0.1395],
                "name":"Ambrosden Avenue"
      },
     "geometry": {
       "type":"Point",
       "coordinates": [	-0.1395 	,	51.4963]
      }
  },
  {
     "type":"Feature",
     "properties": {      
                    "updated":"Jan 2016",
                   "location":"City",
               "postcode":"EC3N 2LU",
                "street":[51.5114,-0.0758],
                "name":"America Square"
      },
     "geometry": {
       "type":"Point",
       "coordinates": [	-0.0758 	,	51.5114]
      }
  },
  {
     "type":"Feature",
     "properties": {      
                   "updated":"joe",
                   "location":"joe",
               "postcode":"NULL",
                "street":[51.5276,-0.1174],
                "name":"Ampton Place"
      },
     "geometry": {
       "type":"Point",
       "coordinates": [	-0.1174 	,	51.5276]
      }
  },
  {
     "type":"Feature",
     "properties": {      
                   "updated":"October 2015",
                   "location":"Westminster",
               "postcode":"NULL",
                "street":[51.5118,-0.1336],
                "name":"Archer Street"
      },
     "geometry": {
       "type":"Point",
       "coordinates": [	-0.1336 	,	51.5118]
      }
  },
  {
     "type":"Feature",
     "properties": {      
                   "updated":"October 2015",
                   "location":"Kensington",
               "postcode":"W8 7DB",
                "street":[51.5004,-0.1956],
                "name":"Argyll Road"
      },
     "geometry": {
       "type":"Point",
       "coordinates": [	-0.1956 	,	51.5004]
      }
  },
  {
     "type":"Feature",
     "properties": {      
                   "updated":"joe",
                   "location":"joe",
               "postcode":"NULL",
                "street":[51.5296,-0.1242],
                "name":"Argyll Road  -  check"
      },
     "geometry": {
       "type":"Point",
       "coordinates": [	-0.1242	,	51.5296]
      }
  },
  {
     "type":"Feature",
     "properties": {      
                   "updated":"October 2015",
                   "location":"Westminster",
               "postcode":"NULL",
                "street":[51.5072,-0.1410],
                "name":"Arlington Street"
      },
     "geometry": {
       "type":"Point",
       "coordinates": [	-0.1410 	,	51.5072]
      }
  },
  {
     "type":"Feature",
     "properties": {      
                   "updated":"joe",
                   "location":"Westminster",
               "postcode":"NULL",
                "street":[51.4963,-0.1268],
                "name":"Smith Square"
      },
     "geometry": {
       "type":"Point",
       "coordinates": [	-0.1268	,	51.4963]
      }
  },
  {
     "type":"Feature",
     "properties": {      
                   "updated":"joe",
                   "location":"Westminster",
               "postcode":"NULL",
                "street":[51.4957,-0.1268],
                "name":"Smith Square"
      },
     "geometry": {
       "type":"Point",
       "coordinates": [	-0.1268	,	51.4957]
      }
  },
  {
     "type":"Feature",
     "properties": {      
                   "updated":"Jan 2016",
                   "location":"City",
               "postcode":"WC2A 1AP",
                "street":[51.5179,-0.1128],
                "name":"Southampton Buildings"
      },
     "geometry": {
       "type":"Point",
       "coordinates": [	-0.1128	,	51.5179]
      }
  },
  {
     "type":"Feature",
     "properties": {      
                   "updated":"Jan 2016",
                   "location":"City",
               "postcode":"WC2A 1HL",
                "street":[51.5171,-0.1127],
                "name":"Southampton Buildings"
      },
     "geometry": {
       "type":"Point",
       "coordinates": [	-0.1127	,	51.5171]
      }
  },
  {
     "type":"Feature",
     "properties": {      
                   "updated":"joe",
                   "location":"Westminster",
               "postcode":"NULL",
                "street":[51.5091,-0.1516],
                "name":"South Audley Street"
      },
     "geometry": {
       "type":"Point",
       "coordinates": [	-0.1516	,	51.5091]
      }
  },
  {
     "type":"Feature",
     "properties": {      
                   "updated":"joe",
                   "location":"joe",
               "postcode":"NULL",
                "street":[51.5082,-0.1525],
                "name":"South Street"
      },
     "geometry": {
       "type":"Point",
       "coordinates": [	-0.1525	,	51.5082]
      }
  },
  {
     "type":"Feature",
     "properties": {      
                   "updated":"joe",
                   "location":"joe",
               "postcode":"NULL",
                "street":[51.5199,-0.1628],
                "name":"York Street check it exists"
      },
     "geometry": {
       "type":"Point",
       "coordinates": [	-0.1628	,	51.5199]
      }
  }, 
  {
     "type":"Feature",
     "properties": {      
                   "updated":"Nov 2015",
                   "location":"Kensington",
               "postcode":"W8 5EH",
                "street":[51.5018,-0.1900],
                "name":"Young Street"
      },
     "geometry": {
       "type":"Point",
       "coordinates": [	-0.1901	,	51.5020]
      }
    }
  ]
}');
 
  // Add some style.
  map.data.setStyle(function(feature) {
    return /** @type {google.maps.Data.StyleOptions} */({
      fillColor: feature.getProperty('color'),
      strokeWeight: 1
    });
  });
  
 //[START streetview]
  //cbll= Latitude,longitude for Street View
//http://maps.google.com/maps?q=&layer=c&cbll=31.33519,-89.28720
//      "coordinates": [	-0.194	,	51.51]
// [END streetview]

  // [START snippet]
  // Set mouseover event for each feature.
  map.data.addListener('mouseover', function(event) {
    document.getElementById('info-box').textContent =
        event.feature.getProperty('name')+' ,   postcode = '+event.feature.getProperty('postcode');
    });       
    map.data.addListener('mouseover', function(event) {
    document.getElementById('streetview').innerHTML ='<a href="http://maps.google.com/maps?q=&layer=c&cbll='+event.feature.getProperty('street')+'"> Streetview image</a>';      
   });
   
   
  // [END snippet]
   //<a href="http://www.w3schools.com">Visit W3Schools.com!</a>
//        out += '<a href="' + arr[i].url + '">' + arr[i].display + '</a><br>';
 //           document.getElementById("results").innerHTML=str;
}
    </script>
    <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCJ2KM9fPuRBp5MhDYMMQ8vgF8bU4VyXaw&signed_in=true&callback=initMap"></script>
  </body>
</html>

